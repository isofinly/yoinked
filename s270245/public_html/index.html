<!DOCTYPE html>
<html>

<link href="styles.css" rel="stylesheet" type="text/css">

<script>
    var valueValidX = false;
    var valueValidY = false;
    var valueValidR = false;

    function setXValue(newValue)
    {
        document.getElementById("form_value_x_container").value = newValue;

        var text = "You've picked " + newValue + ", nice choice!";
        document.getElementById("form_value_x_display").innerHTML = text;

        valueValidX = true;
        AllowSendingIfValidInputs();
    }

    function setTimeOffset()
    {
        document.getElementById("form_offset_container").value = new Date().getTimezoneOffset();
    }

    function checkYValue()
    {
        var val = document.getElementById("form_value_y_input").value;
        val = val.replace(",", ".");
        var numValue = +val;

        var errorDisplay = document.getElementById("form_value_y_display");
        valueValidY = false;

        if (val == "") 
        {
            errorDisplay.innerHTML = "";
        }
        else if (val == "pidor")
        {
            errorDisplay.innerHTML = "No, yo mama is!";
        } 
        else if (isNaN(numValue))
        {
            errorDisplay.innerHTML = "No, enter a number! Come on, you can do it!";
        }
        else if (!(numValue >= -5 && numValue <= 3))
        {
            errorDisplay.innerHTML = "Please pick between -5 and 3, sweetie!";
        }
        else 
        {
            errorDisplay.innerHTML = "Good job!";
            document.getElementById("form_value_y_container").value = numValue;
            valueValidY = true;
        }
        
        AllowSendingIfValidInputs();
    }

    function checkRValue()
    {
        var checkboxes = document.getElementsByName("value_r[]");

        var checkedCount = 0;
        for (var i = 0; i < checkboxes.length; i++)
        {
            if (checkboxes[i].checked)
                checkedCount++
        }

        if (checkedCount == 0)
        {
            valueValidR = false;
            document.getElementById("form_value_r_display").innerHTML = "Now, don't be shy! Pick as many as you want!";
        }
        else
        {
            document.getElementById("form_value_r_display").innerHTML = "";
            valueValidR = true;
        }

        AllowSendingIfValidInputs();
    }

    function AllowSendingIfValidInputs()
    {
        if (valueValidX && valueValidY && valueValidR)
        {
            document.getElementById("form_button_submit").disabled = false;
        }
        else
        {            
            document.getElementById("form_button_submit").disabled = true;
        }
    }

</script>



<head>
    <title>It's a beautiful day outside</title>
</head>



<body onload="setTimeOffset()">
    <div id="tophat">
        ОЛЕГ ОСИПОВ, P3214 <br>
        <span>Вариант 214013</span>
    </div>



    <div id="main">
        
        <div class="formholder">
            <form action="f.php", method="POST", class="form">
                Choose an X value! <br>
                <span class="buttons">
                    <span> <button class="genericbutton" type="button" onclick="setXValue(-3)">-3</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(-2)">-2</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(-1)">-1</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(0)">0</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(1)">1</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(2)">2</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(3)">3</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(4)">4</button> </span>
                    <span> <button class="genericbutton" type="button" onclick="setXValue(5)">5</button> </span>
                </span>
                <span id="form_value_x_display">Go ahead, click a button!</span>
                <input type="hidden" id="form_value_x_container" name="value_x" value="">

                <br><br>

                Enter the Y: <br>
                <input type="text" id="form_value_y_input" placeholder="-5 to 3, please!" maxlength="15" oninput="checkYValue()">
                <input type="hidden" id="form_value_y_container" name="value_y" value=""><br>
                <span class="errormessage" id="form_value_y_display"></span>
                
                <br><br>

                And now, pick any R you like!<br>
                <span class="checkboxes">
                    <span>
                        1<br>
                        <input type="checkbox" name="value_r[]" value="1" onclick="checkRValue()">
                    </span>
                    <span>
                        1.5<br>
                        <input type="checkbox" name="value_r[]" value="1.5" onclick="checkRValue()">
                    </span>
                    <span>
                        2<br>
                        <input type="checkbox" name="value_r[]" value="2" onclick="checkRValue()">
                    </span>
                    <span>
                        2.5<br>
                        <input type="checkbox" name="value_r[]" value="2.5" onclick="checkRValue()">
                    </span>
                    <span>
                        3<br>
                        <input type="checkbox" name="value_r[]" value="3" onclick="checkRValue()">
                    </span>
                </span>
                <span class="errormessage" id="form_value_r_display"></span>
                
                <br><br>
                
                <button type="submit" id="form_button_submit" value="Submit" disabled>I'm ready!</button>
                <input type="hidden" id="form_offset_container" name="offset" value="0">

            </form>
        </div>

        <div class="graphics">
            <img src="img/graph.png" alt="Oh no, where's the thing?">
        </div>
    </div>
</body>
</html>